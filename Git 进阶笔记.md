# Git 进阶笔记
## 一、版本回滚

**1. 定义**

​        版本回滚是指将代码仓库恢复到之前的某个提交状态，通常用于撤销错误提交、回退功能等场景。

**2. 常用命令**

（1）`git reset`

- **作用**：移动 HEAD 指针到指定提交，可选择是否修改工作区和暂存区。
- **三种模式**：
  - `--soft`：仅移动 HEAD，保留工作区和暂存区。
  - `--mixed`（默认）：移动 HEAD 并重置暂存区，保留工作区。
  - `--hard`：彻底重置工作区、暂存区和 HEAD，丢弃所有后续更改。

（2）`git revert`

- **作用**：创建一个新提交，撤销指定提交的更改，保留完整历史。
- **适用场景**：已推送到远程仓库的提交，团队协作时推荐使用。

**3. 区别对比**

| 命令   | 历史记录 | 是否安全 | 适用场景              |
| ------ | -------- | -------- | --------------------- |
| reset  | 会改变   | 危险     | 本地未推送的提交      |
| revert | 不改变   | 安全     | 已推送/公共分支的提交 |
**4. 实际操作流程**

场景1：本地未推送的提交回滚

```bash
git log                    # 查看历史
git reset --hard abc123    # 回滚到指定版本
```
场景2：已推送的提交回滚

```bash
git revert abc123          # 创建撤销提交
git push origin main       # 推送到远程
```
---
##  二、冲突解决
**1. 定义**

​        冲突发生在多人协作时，两个分支对同一文件的同一部分进行了不同修改，Git 无法自动合并，需要人工介入。

**2. 冲突标识**

Git 会在冲突文件中插入如下标记：
```diff
<<<<<<< HEAD
当前分支的修改
=======
待合并分支的修改
>>>>>>> branch_name
```
**3. 解决步骤**

（1）查看冲突

```bash
git status
```
冲突文件会显示为 `both modified`。

（2）手动编辑冲突文件

- 打开冲突文件，根据标记手动选择或合并代码。
- 删除冲突标记 `<<<<<<<`、`=======`、`>>>>>>>`。

（3）标记冲突已解决

```bash
git add <file>
```
（4）提交合并

```bash
git commit
```
**4. 辅助工具**

- 图形化工具：`git mergetool` 可启动可视化合并工具（如 KDiff3、Beyond Compare）。
- IDE 插件：VS Code、IntelliJ IDEA 等提供内置冲突解决界面。

**5. 放弃合并**

如不想解决冲突，可中止合并：
```bash
git merge --abort
```
---
##  三、最佳实践
1. **版本回滚**：
   - 本地未推送的提交，优先使用 `reset`。
   - 已推送的提交，使用 `revert` 避免破坏历史。
2. **冲突预防**：
   - 经常 `git pull` 保持同步。
   - 小步提交，减少冲突范围。
3. **团队协作**：
   - 回滚前与团队沟通，避免影响他人。

